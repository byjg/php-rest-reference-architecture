version: '3.2'
services:
  site:
    image: resttest:latest
    build:
      context: .
      dockerfile: docker/Dockerfile
    ports:
      - 80:80
    environment:
      - APPLICATION_ENV=homolog
#    deploy:
#      replicas: 1
#      resources:
#        limits:
#          cpus: '0.50'
#          memory: 384M
#        reservations:
#          cpus: '0.20'
#          memory: 64M
    networks:
      - net

  server:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: password
      TZ: America/Sao_Paulo
    ports:
      - 3306:3306
#    deploy:
#      replicas: 1
#      resources:
#        limits:
#          cpus: '0.80'
#          memory: 640M
#        reservations:
#          cpus: '0.10'
#          memory: 64M
    networks:
      - net

networks:
  net:
    driver: overlay
    attachable: true

